@model WebDienTu.Models.SanPham
@{
    ViewData["Title"] = "Chi tiết sản phẩm";
}

<div class="row">
    <div class="col-md-6">
        <img src="@Model.HinhAnh" class="img-fluid rounded" alt="@Model.TenSanPham" />
    </div>
    <div class="col-md-6">
        <h2>@Model.TenSanPham</h2>
        <p><strong>Danh mục:</strong> @Model.MaDanhMucNavigation?.TenDanhMuc</p>
        <p><strong>Mô tả:</strong> @Model.MoTa</p>
        <p>
            @if (Model.GiaBan < Model.Gia)
            {
                <span class="text-muted text-decoration-line-through">@Model.Gia.ToString("N0") VNĐ</span>
                <span class="text-danger fw-bold ms-2">@Model.GiaBan?.ToString("N0") VNĐ</span>
            }
            else
            {
                <span class="fw-bold">@Model.Gia.ToString("N0") VNĐ</span>
            }
        </p>
        <p><strong>Thương hiệu:</strong> @Model.ThuongHieu</p>
        <p><strong>Xuất xứ:</strong> @Model.XuatXu</p>
        <p><strong>Bảo hành:</strong> @Model.BaoHanh</p>

        <div class="mt-3 d-flex flex-wrap gap-2">
            @if (User.Identity.IsAuthenticated)
            {
                <!-- Nút Thêm vào giỏ -->
                <form asp-controller="GioHang" asp-action="AddToCart" method="post" class="d-inline">
                    <input type="hidden" name="sanPhamId" value="@Model.MaSanPham" />
                    <input type="hidden" name="quantity" value="1" />
                    <button type="submit" class="btn btn-success btn-md d-flex align-items-center">
                        <i class="fa-solid fa-cart-plus me-2"></i> Thêm vào giỏ
                    </button>
                </form>

                <!-- Nút Mua ngay -->
                <form asp-controller="DonHang" asp-action="MuaHang" method="post" class="d-inline">
                    <input type="hidden" name="sanPhamId" value="@Model.MaSanPham" />
                    <button type="submit" class="btn btn-primary btn-md d-flex align-items-center">
                        <i class="fa-solid fa-bolt me-2"></i> Mua ngay
                    </button>
                </form>

                <!-- Nút Yêu thích -->
                <button class="btn btn-outline-danger btn-md d-flex align-items-center">
                    <i class="fa-solid fa-heart me-2"></i> Yêu thích
                </button>

                <!-- Nút Quay lại -->
                <a asp-controller="Home" asp-action="Index" class="btn btn-secondary btn-md d-flex align-items-center">
                    <i class="fa-solid fa-arrow-left me-2"></i> Quay lại
                </a>
            }
            else
            {
                <div class="alert alert-warning w-100">
                    Vui lòng
                    <a asp-controller="Account" asp-action="Login"
                       asp-route-returnUrl="@Url.Action("Details", "Home", new { id = Model.MaSanPham })">
                        đăng nhập
                    </a>
                    hoặc
                    <a asp-controller="Account" asp-action="Register">
                        đăng ký
                    </a>
                    để mua hàng và yêu thích sản phẩm.
                </div>
            }
        </div>

    </div>
</div>
